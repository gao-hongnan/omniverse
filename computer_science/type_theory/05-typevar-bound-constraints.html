<!-- _templates/html.html -->

<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Bound and Constraint in Generics and Type Variables &#8212; Omniverse</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=bb35926c" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../../_static/tabs.js?v=3ee01567"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-MYW5YKC2WF"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-MYW5YKC2WF');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-MYW5YKC2WF');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"tex": {"macros": {"defeq": "\\overset{\\text{def}}{=}", "defa": "\\overset{\\text{(a)}}{=}", "defb": "\\overset{\\text{(b)}}{=}", "defc": "\\overset{\\text{(c)}}{=}", "defd": "\\overset{\\text{(d)}}{=}", "st": "\\mid", "mod": "\\mid", "S": "\\Omega", "s": "\\omega", "e": "\\exp", "P": "\\mathbb{P}", "R": "\\mathbb{R}", "expectation": "\\mathbb{E}", "v": "\\mathbf{v}", "a": "\\mathbf{a}", "b": "\\mathbf{b}", "c": "\\mathbf{c}", "u": "\\mathbf{u}", "w": "\\mathbf{w}", "x": "\\mathbf{x}", "y": "\\mathbf{y}", "z": "\\mathbf{z}", "0": "\\mathbf{0}", "1": "\\mathbf{1}", "A": "\\mathbf{A}", "B": "\\mathbf{B}", "C": "\\mathbf{C}", "E": "\\mathcal{F}", "eventA": "\\mathcal{A}", "lset": "\\left\\{", "rset": "\\right\\}", "lsq": "\\left[", "rsq": "\\right]", "lpar": "\\left(", "rpar": "\\right)", "lcurl": "\\left\\{", "rcurl": "\\right\\}", "pmf": "p_X", "pdf": "f_X", "pdftwo": "f_{X,Y}", "pdfjoint": "f_{\\mathbf{X}}", "pmfjointxy": "p_{X, Y}", "pdfjointxy": "f_{X, Y}", "cdf": "F_X", "pspace": "(\\Omega, \\mathcal{F}, \\mathbb{P})", "var": "\\operatorname{Var}", "std": "\\operatorname{Std}", "bern": "\\operatorname{Bernoulli}", "binomial": "\\operatorname{Binomial}", "geometric": "\\operatorname{Geometric}", "poisson": "\\operatorname{Poisson}", "uniform": "\\operatorname{Uniform}", "normal": "\\operatorname{Normal}", "gaussian": "\\operatorname{Gaussian}", "gaussiansymbol": "\\mathcal{N}", "exponential": "\\operatorname{Exponential}", "iid": "\\textbf{i.i.d.}", "and": "\\text{and}", "O": "\\mathcal{O}"}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'computer_science/type_theory/05-typevar-bound-constraints';</script>
    <link rel="canonical" href="https://www.gaohongnan.com/computer_science/type_theory/05-typevar-bound-constraints.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Invariance, Covariance and Contravariance" href="06-invariance-covariance-contravariance.html" />
    <link rel="prev" title="Generics and Type Variables" href="04-generics.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Omniverse - Home"/>
    <img src="../../_static/logo.png" class="logo__image only-dark pst-js-only" alt="Omniverse - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Omniverse
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Notations</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../notations/machine_learning.html">Machine Learning Notations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Influential Ideas and Papers</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../influential/generative_pretrained_transformer/01_intro.html">Generative Pre-trained Transformers</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../influential/generative_pretrained_transformer/02_notations.html">Notations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/generative_pretrained_transformer/03_concept.html">The Concept of Generative Pre-trained Transformers (GPT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/generative_pretrained_transformer/04_implementation.html">The Implementation of Generative Pre-trained Transformers (GPT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/generative_pretrained_transformer/05_adder.html">Training a Mini-GPT to Learn Two-Digit Addition</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../influential/low_rank_adaptation/01_intro.html">Low-Rank Adaptation Of Large Language Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../influential/low_rank_adaptation/02_concept.html">Concept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/low_rank_adaptation/03_implementation.html">Implementation</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../influential/empirical_risk_minimization/01_intro.html">Empirical Risk Minimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../influential/empirical_risk_minimization/02_concept.html">Concept: Empirical Risk Minimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/empirical_risk_minimization/03_bayes_optimal_classifier.html">Bayes Optimal Classifier</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../influential/learning_theory/01_intro.html">Is The Learning Problem Solvable?</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../influential/learning_theory/02_concept.html">Concept: Learning Theory</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../influential/kmeans_clustering/01_intro.html">Lloyd’s K-Means Clustering Algorithm</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../influential/kmeans_clustering/02_concept.html">Concept: K-Means Clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/kmeans_clustering/03_implementation.html">Implementation: K-Means (Lloyd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/kmeans_clustering/04_image_segmentation.html">Application: Image Compression and Segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/kmeans_clustering/05_conceptual_questions.html">Conceptual Questions</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../influential/naive_bayes/01_intro.html">Naive Bayes</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../influential/naive_bayes/02_concept.html">Concept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/naive_bayes/03_implementation.html">Naives Bayes Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/naive_bayes/04_example_penguins.html">Naive Bayes Application: Penguins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/naive_bayes/05_application_mnist.html">Naive Bayes Application (MNIST)</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../influential/gaussian_mixture_models/01_intro.html">Mixture Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../influential/gaussian_mixture_models/02_concept.html">Concept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/gaussian_mixture_models/03_implementation.html">Gaussian Mixture Models Implementation</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../influential/linear_regression/01_intro.html">Linear Regression</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../influential/linear_regression/02_concept.html">Concept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../influential/linear_regression/03_implementation.html">Implementation</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Playbook</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../playbook/training/intro.html">Training Dynamics And Tricks</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../playbook/training/how_to_calculate_flops_in_transformer_based_models.html">How to Calculate the Number of FLOPs in Transformer Based Models?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../playbook/training/why_cosine_annealing_warmup_stabilize_training.html">Why Does Cosine Annealing With Warmup Stabilize Training?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../playbook/training/how_to_finetune_decoder_with_last_token_pooling.html">How To Fine-Tune Decoder-Only Models For Sequence Classification Using Last Token Pooling?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../playbook/training/how_to_finetune_decoder_with_cross_attention.html">How To Fine-Tune Decoder-Only Models For Sequence Classification With Cross-Attention?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../playbook/training/how_to_teacher_student_knowledge_distillation.html">How To Do Teacher-Student Knowledge Distillation?</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../playbook/why_softmax_preserves_order_translation_invariant_not_invariant_scaling.html">Softmax Preserves Order, Is Translation Invariant But Not Invariant Under Scaling.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../playbook/how_to_inspect_function_and_class_signatures.html">How to Inspect Function and Class Signatures in Python?</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Probability Theory</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../probability_theory/01_mathematical_preliminaries/intro.html">Chapter 1. Mathematical Preliminaries</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/01_mathematical_preliminaries/01_combinatorics.html">Permutations and Combinations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/01_mathematical_preliminaries/02_calculus.html">Calculus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/01_mathematical_preliminaries/03_contours.html">Contour Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/01_mathematical_preliminaries/exercises.html">Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../probability_theory/02_probability/intro.html">Chapter 2. Probability</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/02_probability/0202_probability_space.html">Probability Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/02_probability/0203_probability_axioms.html">Probability Axioms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/02_probability/0204_conditional_probability.html">Conditional Probability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/02_probability/0205_independence.html">Independence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/02_probability/0206_bayes_theorem.html">Baye’s Theorem and the Law of Total Probability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/02_probability/summary.html">Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/intro.html">Chapter 3. Discrete Random Variables</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/0301_random_variables.html">Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/0302_discrete_random_variables.html">Discrete Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/0303_probability_mass_function.html">Probability Mass Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/0304_cumulative_distribution_function.html">Cumulative Distribution Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/0305_expectation.html">Expectation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/0306_moments_and_variance.html">Moments and Variance</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/uniform/intro.html">Discrete Uniform Distribution</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/uniform/0307_discrete_uniform_distribution_concept.html">Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/uniform/0307_discrete_uniform_distribution_application.html">Application</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/bernoulli/intro.html">Bernoulli Distribution</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/bernoulli/0308_bernoulli_distribution_concept.html">Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/bernoulli/0308_bernoulli_distribution_application.html">Application</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/iid.html">Independent and Identically Distributed (IID)</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/binomial/intro.html">Binomial Distribution</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/binomial/0309_binomial_distribution_concept.html">Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/binomial/0309_binomial_distribution_implementation.html">Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/binomial/0309_binomial_distribution_application.html">Real World Examples</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/geometric/intro.html">Geometric Distribution</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/geometric/0310_geometric_distribution_concept.html">Concept</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/poisson/intro.html">Poisson Distribution</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/poisson/0311_poisson_distribution_concept.html">Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/poisson/0311_poisson_distribution_implementation.html">Implementation</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/summary.html">Important</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/03_discrete_random_variables/exercises.html">Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/intro.html">Chapter 4. Continuous Random Variables</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/from_discrete_to_continuous.html">From Discrete to Continuous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0401_continuous_random_variables.html">Continuous Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0402_probability_density_function.html">Probability Density Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0403_expectation.html">Expectation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0404_moments_and_variance.html">Moments and Variance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0405_cumulative_distribution_function.html">Cumulative Distribution Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0406_mean_median_mode.html">Mean, Median and Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0407_continuous_uniform_distribution.html">Continuous Uniform Distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0408_exponential_distribution.html">Exponential Distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0409_gaussian_distribution.html">Gaussian Distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0410_skewness_and_kurtosis.html">Skewness and Kurtosis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0411_convolve_and_sum_of_random_variables.html">Convolution and Sum of Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/04_continuous_random_variables/0412_functions_of_random_variables.html">Functions of Random Variables</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../probability_theory/05_joint_distributions/intro.html">Chapter 5. Joint Distributions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../probability_theory/05_joint_distributions/from_single_variable_to_joint_distributions.html">From Single Variable to Joint Distributions</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0501_joint_pmf_pdf/intro.html">Joint PMF and PDF</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0501_joint_pmf_pdf/concept.html">Concept</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0502_joint_expectation_and_correlation/intro.html">Joint Expectation and Correlation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0502_joint_expectation_and_correlation/concept.html">Concept</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0503_conditional_pmf_pdf/intro.html">Conditional PMF and PDF</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0503_conditional_pmf_pdf/concept.html">Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0503_conditional_pmf_pdf/application.html">Application</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0504_conditional_expectation_variance/intro.html">Conditional Expectation and Variance</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0504_conditional_expectation_variance/concept.html">Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0504_conditional_expectation_variance/exercises.html">Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0505_sum_of_random_variables/intro.html">Sum of Random Variables</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0505_sum_of_random_variables/concept.html">Concept</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0506_random_vectors/intro.html">Random Vectors</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0506_random_vectors/concept.html">Concept</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0507_multivariate_gaussian/intro.html">Multivariate Gaussian Distribution</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0507_multivariate_gaussian/concept.html">Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0507_multivariate_gaussian/application_transformation.html">Application: Plots and Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0507_multivariate_gaussian/psd.html">Covariance Matrix is Positive Semi-Definite</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0507_multivariate_gaussian/eigendecomposition.html">Eigendecomposition and Covariance Matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/05_joint_distributions/0507_multivariate_gaussian/geometry_of_multivariate_gaussian.html">The Geometry of Multivariate Gaussians</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../probability_theory/06_sample_statistics/intro.html">Chapter 6. Sample Statistics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0601_moment_generating_and_characteristic_functions/intro.html">Moment Generating and Characteristic Functions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0601_moment_generating_and_characteristic_functions/moment_generating_function.html">Moment Generating Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0601_moment_generating_and_characteristic_functions/moment_generating_function_application_sum_of_rv.html">Application: Moment Generating Function and the Sum of Random Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0601_moment_generating_and_characteristic_functions/characteristic_function.html">Characteristic Function</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0602_probability_inequalities/intro.html">Probability Inequalities</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0602_probability_inequalities/concept.html">Probability Inequalities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0602_probability_inequalities/application.html">Application: Learning Theory</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0603_law_of_large_numbers/intro.html">Law of Large Numbers</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0603_law_of_large_numbers/concept.html">Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0603_law_of_large_numbers/convergence.html">Convergence of Sample Average</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/06_sample_statistics/0603_law_of_large_numbers/application.html">Application: Learning Theory</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../probability_theory/08_estimation_theory/intro.html">Chapter 8. Estimation Theory</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../probability_theory/08_estimation_theory/maximum_likelihood_estimation/intro.html">Maximum Likelihood Estimation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../probability_theory/08_estimation_theory/maximum_likelihood_estimation/concept.html">Concept</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Operations</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../operations/distributed/intro.html">Distributed Systems</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/distributed/01_notations.html">Notations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/distributed/02_basics.html">Basics Of Distributed Data Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/distributed/03_how_to_setup_slurm_in_aws.html">How to Setup SLURM and ParallelCluster in AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/distributed/04_ablation.html">Ablations</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../operations/profiling/intro.html">Profiling</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/profiling/01_synchronize.html">Synchronize CUDA To Time CUDA Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/profiling/02_timeit.html">Profiling Code With Timeit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/profiling/03_time_profiler.html">PyTorch’s Event And Profiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/profiling/04_small_gpt_profile.html">Profile GPT Small Time And Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/profiling/05_memory_leak.html">CUDA Memory Allocations</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../operations/machine_learning_lifecycle/00_intro.html">The Lifecycle of an AIOps System</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/machine_learning_lifecycle/01_problem_formulation.html">Stage 1. Problem Formulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/machine_learning_lifecycle/02_project_scoping.html">Stage 2. Project Scoping And Framing The Problem</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../operations/machine_learning_lifecycle/03_dataops_pipeline/03_dataops_pipeline.html">Stage 3. Data Pipeline (Data Engineering and DataOps)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../operations/machine_learning_lifecycle/03_dataops_pipeline/031_data_source_and_format.html">Stage 3.1. Data Source and Formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../operations/machine_learning_lifecycle/03_dataops_pipeline/032_data_model_and_storage.html">Stage 3.2. Data Model and Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../operations/machine_learning_lifecycle/03_dataops_pipeline/033_etl.html">Stage 3.3. Extract, Transform, Load (ETL)</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/machine_learning_lifecycle/04_mlops_data_pipeline.html">Stage 4. Data Extraction (MLOps), Data Analysis (Data Science), Data Preparation (Data Science)</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../operations/machine_learning_lifecycle/05_model_development_selection_and_training/05_ml_training_pipeline.html">Stage 5. Model Development and Training (MLOps)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../operations/machine_learning_lifecycle/05_model_development_selection_and_training/051_model_selection.html">Stage 5.1. Model Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../operations/machine_learning_lifecycle/05_model_development_selection_and_training/052_metric_selection.html">Stage 5.2. Metric Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../operations/machine_learning_lifecycle/05_model_development_selection_and_training/053_experiment_tracking.html">Stage 5.3. Experiment Tracking And Versioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../operations/machine_learning_lifecycle/05_model_development_selection_and_training/054_model_testing.html">Stage 5.4. Model Testing</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/machine_learning_lifecycle/06_model_evaluation.html">Stage 6. Model Evaluation (MLOps)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/machine_learning_lifecycle/07_model_validation_registry_and_pushing_model_to_production.html">Stage 7. Model Validation, Registry and Pushing Model to Production (MLOps)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/machine_learning_lifecycle/08_model_deployment_and_serving.html">Stage 8. Model Serving (MLOps)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/machine_learning_lifecycle/09_model_monitoring.html">Stage 9. Model Monitoring (MLOps)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/machine_learning_lifecycle/010_continuous_integration_deployment_learning_and_training.html">Stage 10. Continuous Integration, Deployment, Learning and Training (DevOps, DataOps, MLOps)</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Software Engineering</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../software_engineering/config_management/intro.html">Config, State, Metadata Management</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/config_management/concept.html">Configuration Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/config_management/01-pydra.html">Pydantic And Hydra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/config_management/02-state.html">State And Metadata Management</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../software_engineering/design_patterns/intro.html">Design Patterns</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/design_patterns/dependency_inversion_principle.html">Dependency Inversion Principle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/design_patterns/named_constructor.html">Named Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/design_patterns/strategy.html">Strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/design_patterns/registry.html">Registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/design_patterns/god_object_pattern.html">Context Object Pattern (God Object)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/design_patterns/factory_method.html">Factory Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/design_patterns/singleton.html">Singleton</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../software_engineering/python/intro.html">Python</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/python/new_vs_init.html">Init vs New</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/python/gil.html">Global Interpreter Lock (GIL)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/python/iterator_protocol.html">The Iterator Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/python/decorator.html">Decorator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/python/generators_over_lists.html">Generators Over Lists For Memory Efficiency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/python/pydantic.html">Pydantic Is All You Need - Jason Liu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/python/mutable_default.html">Do Not Use Mutable Default Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/python/set_vs_list.html">Set Over List For Frequent Membership Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/python/late_binding_closures.html">Late Binding Closures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/python/is_vs_equality.html">Is vs Equality</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../software_engineering/concurrency_parallelism_asynchronous/intro.html">Concurrency, Parallelism and Asynchronous Programming</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/concurrency_parallelism_asynchronous/overview.html">Overview Of Concurrency, Parallelism, and Asynchronous Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/concurrency_parallelism_asynchronous/insights/locks_for_thread_safety.html">Thread Safety</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software_engineering/concurrency_parallelism_asynchronous/generator_yield.html">A Rudimentary Introduction to Generator and Yield in Python</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Computer Science</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">Type Theory, A Very Rudimentary Introduction</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01-subtypes.html">Subtypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-type-safety.html">Type Safety</a></li>
<li class="toctree-l2"><a class="reference internal" href="03-subsumption.html">Subsumption</a></li>
<li class="toctree-l2"><a class="reference internal" href="04-generics.html">Generics and Type Variables</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Bound and Constraint in Generics and Type Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="06-invariance-covariance-contravariance.html">Invariance, Covariance and Contravariance</a></li>
<li class="toctree-l2"><a class="reference internal" href="07-pep-3124-overloading.html">Function Overloading</a></li>
<li class="toctree-l2"><a class="reference internal" href="08-pep-661-sentinel-values.html">Sentinel Types</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Structures and Algorithms</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dsa/complexity_analysis/intro.html">Complexity Analysis</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dsa/complexity_analysis/master_theorem.html">Master Theorem </a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dsa/array/intro.html">List/Array</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dsa/array/concept.html">Concept</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../dsa/array/questions/intro.html">Questions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dsa/array/questions/01-two-sum.html">Two Sum</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dsa/hash_map/intro.html">Hash Map</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dsa/hash_map/concept.html">Concept</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../dsa/hash_map/questions/intro.html">Questions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dsa/hash_map/questions/01-two-sum.html">Two Sum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dsa/hash_map/questions/49-group-anagrams.html">Group Anagrams</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dsa/two_pointers/intro.html">Two Pointers And Sliding Window</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dsa/two_pointers/two_pointers.html">Two Pointers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dsa/two_pointers/sliding_window.html">Sliding Window</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../dsa/two_pointers/questions/intro.html">Questions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../dsa/two_pointers/questions/two_pointers/intro.html">Two Pointers</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dsa/two_pointers/questions/two_pointers/26-remove-duplicates-from-sorted-array.html">Remove Duplicates from Sorted Array</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dsa/two_pointers/questions/two_pointers/167-two-sum-ii-input-array-is-sorted.html">Two Sum II - Input Array Is Sorted</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../dsa/two_pointers/questions/sliding_window/intro.html">Sliding Window</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dsa/two_pointers/questions/sliding_window/438-find-all-anagrams-in-a-string.html">Find All Anagrams in a String</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dsa/stack/intro.html">Stack</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dsa/stack/concept.html">Concept</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../dsa/stack/questions/intro.html">Questions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dsa/stack/questions/20-valid-parentheses.html">Valid Parentheses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dsa/stack/questions/155-min-stack.html">Min Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dsa/stack/questions/232-implement-queue-using-stacks.html">Implement Queue using Stacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dsa/stack/questions/344-reverse-string.html">Reverse String</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dsa/queue/intro.html">Queue</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dsa/queue/concept.html">Concept</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../dsa/queue/dequeue.html">Double Ended Queue</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dsa/queue/questions/hot-potatoes.html">Easy - Hot Potatoes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dsa/queue/questions/125-valid-palindrome.html">Palindrome Checker</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dsa/searching_algorithms/linear_search/intro.html">Linear Search</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dsa/searching_algorithms/linear_search/concept.html">Concept</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dsa/searching_algorithms/binary_search/intro.html">Binary Search</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dsa/searching_algorithms/binary_search/concept.html">Concept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dsa/searching_algorithms/binary_search/problems/875-koko-eating-bananas.html">Koko Eating Bananas</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Linear Algebra</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../linear_algebra/01_preliminaries/intro.html">Preliminaries</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../linear_algebra/01_preliminaries/01-fields.html">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../linear_algebra/01_preliminaries/02-systems-of-linear-equations.html">Systems of Linear Equations</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../linear_algebra/02_vectors/intro.html">Vectors</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../linear_algebra/02_vectors/01-vector-definition.html">Vector and Its Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../linear_algebra/02_vectors/02-vector-operation.html">Vector and Its Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../linear_algebra/02_vectors/03-vector-norm.html">Vector Norm and Distance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../linear_algebra/02_vectors/04-vector-products.html">A First Look at Vector Products</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">References, Resources and Roadmap</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../citations.html">IEEE (Style) Citations</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/gao-hongnan/omniverse/blob/main/omniverse/computer_science/type_theory/05-typevar-bound-constraints.md" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/gao-hongnan/omniverse" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/gao-hongnan/omniverse/issues/new?title=Issue%20on%20page%20%2Fcomputer_science/type_theory/05-typevar-bound-constraints.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/computer_science/type_theory/05-typevar-bound-constraints.ipynb" target="_blank"
   class="btn btn-sm btn-download-notebook-button dropdown-item"
   title="Download notebook file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li><a href="../../_sources/computer_science/type_theory/05-typevar-bound-constraints.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Bound and Constraint in Generics and Type Variables</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#some-motivation-the-problem-with-unconstrained-type-variable">Some Motivation, The Problem With Unconstrained Type Variable</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#constraining-type-variable">Constraining Type Variable</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#type-binding">Type Binding</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#type-variables-and-substitution">Type Variables And Substitution</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#binding-time-and-scope">Binding Time And Scope</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#union-type-versus-constrained-type-variable">Union Type versus Constrained Type Variable</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#union-type">Union Type</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#constrained-typevar-approach">Constrained TypeVar Approach</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upper-bounding-type-variables">Upper Bounding Type Variables</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-type-variables-with-upper-bounds">Defining Type Variables with Upper Bounds</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#some-motivation-simple-length-comparison">Some Motivation, Simple Length Comparison</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-case-study-on-sized">A Case Study On <code class="docutils literal notranslate"><span class="pre">Sized</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-not-use-constraints">Why Not Use Constraints?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bounding-and-semantic-clarity">Bounding and Semantic Clarity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-case-study-on-addable">A Case Study On <code class="docutils literal notranslate"><span class="pre">Addable</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bound-versus-constraints">Bound versus Constraints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references-and-further-readings">References and Further Readings</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="bound-and-constraint-in-generics-and-type-variables">
<h1>Bound and Constraint in Generics and Type Variables<a class="headerlink" href="#bound-and-constraint-in-generics-and-type-variables" title="Link to this heading">#</a></h1>
<p><a class="reference external" href="https://twitter.com/gaohongnan"><img alt="Twitter Handle" src="https://img.shields.io/badge/Twitter-&#64;gaohongnan-blue?style=social&amp;logo=twitter" /></a>
<a class="reference external" href="https://linkedin.com/in/gao-hongnan"><img alt="LinkedIn Profile" src="https://img.shields.io/badge/&#64;gaohongnan-blue?style=social&amp;logo=linkedin" /></a>
<a class="reference external" href="https://github.com/gao-hongnan"><img alt="GitHub Profile" src="https://img.shields.io/badge/GitHub-gao--hongnan-lightgrey?style=social&amp;logo=github" /></a>
<img alt="Tag" src="https://img.shields.io/badge/Tag-Structured_Musings-purple" />
<img alt="Tag" src="https://img.shields.io/badge/Level-Beginner-green" /></p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#some-motivation-the-problem-with-unconstrained-type-variable" id="id5">Some Motivation, The Problem With Unconstrained Type Variable</a></p></li>
<li><p><a class="reference internal" href="#constraining-type-variable" id="id6">Constraining Type Variable</a></p>
<ul>
<li><p><a class="reference internal" href="#type-binding" id="id7">Type Binding</a></p>
<ul>
<li><p><a class="reference internal" href="#type-variables-and-substitution" id="id8">Type Variables And Substitution</a></p></li>
<li><p><a class="reference internal" href="#binding-time-and-scope" id="id9">Binding Time And Scope</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#union-type-versus-constrained-type-variable" id="id10">Union Type versus Constrained Type Variable</a></p>
<ul>
<li><p><a class="reference internal" href="#union-type" id="id11">Union Type</a></p></li>
<li><p><a class="reference internal" href="#constrained-typevar-approach" id="id12">Constrained TypeVar Approach</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#upper-bounding-type-variables" id="id13">Upper Bounding Type Variables</a></p>
<ul>
<li><p><a class="reference internal" href="#defining-type-variables-with-upper-bounds" id="id14">Defining Type Variables with Upper Bounds</a></p></li>
<li><p><a class="reference internal" href="#some-motivation-simple-length-comparison" id="id15">Some Motivation, Simple Length Comparison</a></p></li>
<li><p><a class="reference internal" href="#a-case-study-on-sized" id="id16">A Case Study On <code class="docutils literal notranslate"><span class="pre">Sized</span></code></a></p></li>
<li><p><a class="reference internal" href="#why-not-use-constraints" id="id17">Why Not Use Constraints?</a></p></li>
<li><p><a class="reference internal" href="#bounding-and-semantic-clarity" id="id18">Bounding and Semantic Clarity</a></p></li>
<li><p><a class="reference internal" href="#a-case-study-on-addable" id="id19">A Case Study On <code class="docutils literal notranslate"><span class="pre">Addable</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bound-versus-constraints" id="id20">Bound versus Constraints</a></p></li>
<li><p><a class="reference internal" href="#references-and-further-readings" id="id21">References and Further Readings</a></p></li>
</ul>
</nav>
<section id="some-motivation-the-problem-with-unconstrained-type-variable">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Some Motivation, The Problem With Unconstrained Type Variable</a><a class="headerlink" href="#some-motivation-the-problem-with-unconstrained-type-variable" title="Link to this heading">#</a></h2>
<p>We start off with some motivation. To understand why unconstrained type
variables can be problematic, let’s examine a simple <code class="docutils literal notranslate"><span class="pre">add</span></code> function that
combines two arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
<p>And note that running this piece of code through <code class="docutils literal notranslate"><span class="pre">mypy</span></code><a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> will yield two
particular errors:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>4: error: Returning Any from function declared to return &quot;T&quot;  [no-any-return]
        return x + y
        ^~~~~~~~~~~~
4: error: Unsupported left operand type for + (&quot;T&quot;)  [operator]
        return x + y
               ^~~~~
</pre></div>
</div>
<p>These errors occur because <code class="docutils literal notranslate"><span class="pre">TypeVar(&quot;T&quot;)</span></code> is <em><strong>unconstrained</strong></em>, and this
<em>means</em> <code class="docutils literal notranslate"><span class="pre">T</span></code> can represent literally any type, and not all type can do <code class="docutils literal notranslate"><span class="pre">add</span></code>. Why
so? Because for <code class="docutils literal notranslate"><span class="pre">+</span></code> operator, the underlying object must implement the <code class="docutils literal notranslate"><span class="pre">__add__</span></code>
method. For instance, two dictionaries cannot be added together because their
<code class="docutils literal notranslate"><span class="pre">__add__</span></code> is not well defined. This error that <code class="docutils literal notranslate"><span class="pre">mypy</span></code> raised forces you to
rethink your code design - in that what types of type the type variable <code class="docutils literal notranslate"><span class="pre">T</span></code> can
take on. Assume for the sake of simplicity, that your program’s <code class="docutils literal notranslate"><span class="pre">add</span></code> would only
operate on a few types:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NDArray[np.float64]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p></li>
</ul>
<p>And if we can somehow tell our type variable <code class="docutils literal notranslate"><span class="pre">T</span></code> to <strong><em>only</em></strong> take on any one
of the 4 types above, then our job is done. This motivates the need for
<em>constraining</em> type variables to a specific set of types that support our
desired operations (i.e. <code class="docutils literal notranslate"><span class="pre">+</span></code> operator).</p>
</section>
<section id="constraining-type-variable">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Constraining Type Variable</a><a class="headerlink" href="#constraining-type-variable" title="Link to this heading">#</a></h2>
<p><strong>Constraints</strong> allow you to specify a list of explicit types that a type
variable (<code class="docutils literal notranslate"><span class="pre">TypeVar</span></code>) can take. This means the type variable can represent any
one of these specified types, and no others.</p>
<ul class="simple">
<li><p><strong>Syntax</strong>: <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">TypeVar(&quot;T&quot;,</span> <span class="pre">Type1,</span> <span class="pre">Type2,</span> <span class="pre">...)</span></code></p></li>
<li><p><strong>Meaning</strong>: The type variable <code class="docutils literal notranslate"><span class="pre">T</span></code> can be any one of <code class="docutils literal notranslate"><span class="pre">Type1</span></code>, <code class="docutils literal notranslate"><span class="pre">Type2</span></code>, etc.</p></li>
<li><p><strong>Concrete</strong>: <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">TypeVar(&quot;T&quot;,</span> <span class="pre">int,</span> <span class="pre">float)</span></code> means <code class="docutils literal notranslate"><span class="pre">T</span></code> can only be <code class="docutils literal notranslate"><span class="pre">int</span></code> or
<code class="docutils literal notranslate"><span class="pre">float</span></code>.</p></li>
</ul>
<p>To be more formal, a constrained type variable is a type variable <span class="math notranslate nohighlight">\(T\)</span> bound to a
finite set of types <span class="math notranslate nohighlight">\(\mathcal{S} = \{T_1, T_2, \ldots, T_n\}\)</span> such that <span class="math notranslate nohighlight">\(T\)</span> can
only be instantiated with types from <span class="math notranslate nohighlight">\(\mathcal{S}\)</span>. So if one declares
<code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">TypeVar(&quot;T&quot;,</span> <span class="pre">T_1,</span> <span class="pre">T_2,</span> <span class="pre">...)</span></code>, then <span class="math notranslate nohighlight">\(T\)</span> can only be bound to a type
<span class="math notranslate nohighlight">\(T_i \in \mathcal{S} = \{T_1, T_2, \ldots, T_n\}\)</span>.</p>
<p>In our <code class="docutils literal notranslate"><span class="pre">add</span></code> example, since we only want the type variable <code class="docutils literal notranslate"><span class="pre">T</span></code> to take on 4
specific types, we can thus re-write the type variable as such:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="linenos">4</span><span class="kn">from</span> <span class="nn">numpy.typing</span> <span class="kn">import</span> <span class="n">NDArray</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">])</span>
<span class="linenos">7</span>
<span class="linenos">8</span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="linenos">9</span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
</div>
</div>
<p>Then running <code class="docutils literal notranslate"><span class="pre">mypy</span></code> again, will yield no errors, because the static type checker
is intelligent enough to know that <code class="docutils literal notranslate"><span class="pre">T</span></code> can only take on <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code>,
or <code class="docutils literal notranslate"><span class="pre">NDArray[np.float64]</span></code>, all of which has the <code class="docutils literal notranslate"><span class="pre">add</span></code> operator well defined.</p>
<section id="type-binding">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Type Binding</a><a class="headerlink" href="#type-binding" title="Link to this heading">#</a></h3>
<p>When using a constrained <code class="docutils literal notranslate"><span class="pre">TypeVar</span></code>, the type checker ensures that within a
<strong>single usage of the function</strong>, all occurrences of <code class="docutils literal notranslate"><span class="pre">T</span></code> must be the same type.
This is usually defined as
<a class="reference external" href="https://courses.cs.vt.edu/cs3304/Fall16/meng/lecture_notes/cs3304-9.pdf"><strong>Type Binding</strong></a>.</p>
<p>What does this even mean? Type binding is the association of a type variable
(like <code class="docutils literal notranslate"><span class="pre">T</span></code>) with a <strong>concrete</strong> type (like <code class="docutils literal notranslate"><span class="pre">int</span></code>). We can intuitively think of
this action as a <em>substitution</em> (or <em>mapping</em>) of the type variable with a
concrete type - we replace every occurrence of <code class="docutils literal notranslate"><span class="pre">T</span></code> with the concrete (actual)
type.</p>
<section id="type-variables-and-substitution">
<h4><a class="toc-backref" href="#id8" role="doc-backlink">Type Variables And Substitution</a><a class="headerlink" href="#type-variables-and-substitution" title="Link to this heading">#</a></h4>
<p>Let’s use the earlier example of <code class="docutils literal notranslate"><span class="pre">add</span></code> function, and see how type binding works.</p>
<p>In line 6, we declared <code class="docutils literal notranslate"><span class="pre">T</span></code> as
<code class="docutils literal notranslate"><span class="pre">TypeVar(&quot;T&quot;,</span> <span class="pre">int,</span> <span class="pre">float,</span> <span class="pre">NDArray[np.float64],</span> <span class="pre">str)</span></code>. This means:</p>
<ul class="simple">
<li><p>There <em>exists</em> a type variable <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">T</span></code> can only be <em>substituted</em> from the set of types
<code class="docutils literal notranslate"><span class="pre">{int,</span> <span class="pre">float,</span> <span class="pre">NDArray[np.float64],</span> <span class="pre">str}</span></code>.</p></li>
<li><p><strong><em>All</em></strong> occurences of <code class="docutils literal notranslate"><span class="pre">T</span></code> in a single <strong>function invocation</strong> must be
substituted with the same type.</p></li>
</ul>
<p>Since type binding happens at <strong><em>function call time (runtime)</em></strong>, then the
process is like follows (<code class="docutils literal notranslate"><span class="pre">T</span></code> and <span class="math notranslate nohighlight">\(T\)</span> are interchangeable):</p>
<ul class="simple">
<li><p>Say we invoke the function <code class="docutils literal notranslate"><span class="pre">add(a=x,</span> <span class="pre">b=y)</span></code> where <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are of some
type.</p></li>
<li><p>Let <code class="docutils literal notranslate"><span class="pre">type(x)</span></code> be denoted as <span class="math notranslate nohighlight">\(T_x\)</span> and <code class="docutils literal notranslate"><span class="pre">type(y)</span></code> be denoted as <span class="math notranslate nohighlight">\(T_y\)</span>.</p></li>
<li><p>For the checker to pass, we must abide by:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(T_x\)</span> must be one of the types defined in the set
<code class="docutils literal notranslate"><span class="pre">{int,</span> <span class="pre">float,</span> <span class="pre">NDArray[np.float64]}</span></code>.</p></li>
<li><p><span class="math notranslate nohighlight">\(T_y\)</span> must be one of the types defined in the set
<code class="docutils literal notranslate"><span class="pre">{int,</span> <span class="pre">float,</span> <span class="pre">NDArray[np.float64]}</span></code>.</p></li>
<li><p><span class="math notranslate nohighlight">\(T_x\)</span> and <span class="math notranslate nohighlight">\(T_y\)</span> must be the same type due to both have same type
variable <span class="math notranslate nohighlight">\(T\)</span>.</p></li>
<li><p>Then <span class="math notranslate nohighlight">\(T\)</span> is mapped (or bound) to <span class="math notranslate nohighlight">\(T_x\)</span> (<span class="math notranslate nohighlight">\(T \mapsto T_x\)</span>).</p></li>
</ul>
</li>
</ul>
</section>
<section id="binding-time-and-scope">
<h4><a class="toc-backref" href="#id9" role="doc-backlink">Binding Time And Scope</a><a class="headerlink" href="#binding-time-and-scope" title="Link to this heading">#</a></h4>
<p>Consider the following two calls:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">z1</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># T ↦ int</span>
<span class="n">z2</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span> <span class="c1"># T ↦ float</span>
</pre></div>
</div>
<p>Each function call creates a new binding scope:</p>
<p>For the call <code class="docutils literal notranslate"><span class="pre">z1</span> <span class="pre">=</span> <span class="pre">add(2,</span> <span class="pre">5)</span></code>:</p>
<ol class="arabic simple">
<li><p>Let <span class="math notranslate nohighlight">\(x_1 = 2\)</span> and <span class="math notranslate nohighlight">\(x_2 = 5\)</span> be the input arguments</p></li>
<li><p>Given <span class="math notranslate nohighlight">\(\text{type}(x_1) = \text{int} \in \mathcal{S}\)</span> where
<span class="math notranslate nohighlight">\(\mathcal{S} = \{\text{int}, \text{float}, \text{NDArray}[\text{np.float64}], \text{str}\}\)</span></p></li>
<li><p>Create binding <span class="math notranslate nohighlight">\(T \mapsto \text{int}\)</span></p></li>
<li><p>Verify <span class="math notranslate nohighlight">\(\text{type}(x_2) = \text{int} = T\)</span></p></li>
<li><p>Therefore return type <span class="math notranslate nohighlight">\(\text{type}(z_1) = T = \text{int}\)</span> is valid</p></li>
</ol>
<p>An invalid binding would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z3</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is because:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type(1)</span> <span class="pre">=</span> <span class="pre">int</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">T</span></code> is bound to <code class="docutils literal notranslate"><span class="pre">int</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type(&quot;3&quot;)</span> <span class="pre">=</span> <span class="pre">str</span> <span class="pre">!=</span> <span class="pre">int</span> <span class="pre">!=</span> <span class="pre">T</span></code></p></li>
<li><p>Type Error ensues. Mypy will also catch this.</p></li>
</ul>
</section>
</section>
<section id="union-type-versus-constrained-type-variable">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Union Type versus Constrained Type Variable</a><a class="headerlink" href="#union-type-versus-constrained-type-variable" title="Link to this heading">#</a></h3>
<p>The definition of constrained type variable may not be immediately clear on why
we cannot just use an <code class="docutils literal notranslate"><span class="pre">Union</span></code> type. After all, <code class="docutils literal notranslate"><span class="pre">Union</span></code> type is a type that can
take on any one of the types defined in the set
<code class="docutils literal notranslate"><span class="pre">{int,</span> <span class="pre">float,</span> <span class="pre">str,</span> <span class="pre">NDArray[np.float64]}</span></code>. Why bother to purposely specify a
constrained type variable? As we shall see shortly, using <code class="docutils literal notranslate"><span class="pre">Union</span></code> type is a
loose constraint, and it does not enforce the type variable to be of the same
type (i.e. within a function scope, <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> must be of the same type can be
violated).</p>
<section id="union-type">
<h4><a class="toc-backref" href="#id11" role="doc-backlink">Union Type</a><a class="headerlink" href="#union-type" title="Link to this heading">#</a></h4>
<p>Consider the following example using <code class="docutils literal notranslate"><span class="pre">Union</span></code> type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span>
<span class="linenos">2</span><span class="kn">from</span> <span class="nn">numpy.typing</span> <span class="kn">import</span> <span class="n">NDArray</span>
<span class="linenos">3</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="n">U</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">]]</span>
<span class="linenos">6</span>
<span class="linenos">7</span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">U</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">U</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">U</span><span class="p">:</span>
<span class="linenos">8</span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
</div>
</div>
<p>This type signature allows any combination of types within the Union.</p>
<ul class="simple">
<li><p>For any arguments <span class="math notranslate nohighlight">\(a\)</span> and <span class="math notranslate nohighlight">\(b\)</span>:
<span class="math notranslate nohighlight">\(\text{type}(a), \text{type}(b) \in \{\text{int}, \text{float}, \text{NDArray}[\text{np.float64}]\}\)</span></p></li>
<li><p>No constraint exists requiring <span class="math notranslate nohighlight">\(\text{type}(a) = \text{type}(b)\)</span></p></li>
</ul>
<p>This leads to potentially unsafe operations:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result1</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>                     <span class="c1"># Works as expected: 7</span>
<span class="n">result2</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mf">9.99</span><span class="p">)</span>                  <span class="c1"># Type mixing: 12.99</span>
<span class="n">result3</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>   <span class="c1"># Implicit broadcasting: array([4, 5, 6])</span>
<span class="n">result4</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">)</span>                   <span class="c1"># Type mixing: error!</span>
</pre></div>
</div>
<p>The Union type permits all these operations because it only enforces that each
argument independently belongs to the set of allowed types.</p>
<p>More verbosely, with <code class="docutils literal notranslate"><span class="pre">Union</span></code>, the operation we use between arguments (i.e. <code class="docutils literal notranslate"><span class="pre">a</span></code>
and <code class="docutils literal notranslate"><span class="pre">b</span></code>) is supported by any <em>permutation order</em><a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>. As we can see, we added
two <code class="docutils literal notranslate"><span class="pre">int</span></code>, added <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">float</span></code>, added <code class="docutils literal notranslate"><span class="pre">int</span></code> and an <code class="docutils literal notranslate"><span class="pre">NDArray</span></code>, and lastly,
added <code class="docutils literal notranslate"><span class="pre">int</span></code> and a <code class="docutils literal notranslate"><span class="pre">str</span></code> (which is an error)! Is this really what we want? Do we
really want to allow <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">NDArray</span></code> to be added together freely (they can,
but some may regard it as not safe as it might lead to undesirable consequences
via broadcasting). Consequently, there will be no error raised for certain
operations that are unsafe. We fear not those that raises an error, but those
that does not (silent errors).</p>
<p>Furthermore, let’s consider a scenario where you want to restrict the <code class="docutils literal notranslate"><span class="pre">add</span></code>
function to only work with <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code> types. Using a <code class="docutils literal notranslate"><span class="pre">Union</span></code> type would be
problematic because it allows mixing these types in a single operation (like
adding an <code class="docutils literal notranslate"><span class="pre">int</span></code> with a <code class="docutils literal notranslate"><span class="pre">str</span></code>), which would raise a runtime error.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">U</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">U</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">U</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">U</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
<p>Our static type checker is fast to spot this potential error and raised aptly
the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">4</span>:<span class="w"> </span>error:<span class="w"> </span>Unsupported<span class="w"> </span>operand<span class="w"> </span>types<span class="w"> </span><span class="k">for</span><span class="w"> </span>+<span class="w"> </span><span class="o">(</span><span class="s2">&quot;int&quot;</span><span class="w"> </span>and<span class="w"> </span><span class="s2">&quot;str&quot;</span><span class="o">)</span><span class="w">  </span><span class="o">[</span>operator<span class="o">]</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span>a<span class="w"> </span>+<span class="w"> </span>b
<span class="w">               </span>^
<span class="m">4</span>:<span class="w"> </span>error:<span class="w"> </span>Unsupported<span class="w"> </span>operand<span class="w"> </span>types<span class="w"> </span><span class="k">for</span><span class="w"> </span>+<span class="w"> </span><span class="o">(</span><span class="s2">&quot;str&quot;</span><span class="w"> </span>and<span class="w"> </span><span class="s2">&quot;int&quot;</span><span class="o">)</span><span class="w">  </span><span class="o">[</span>operator<span class="o">]</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span>a<span class="w"> </span>+<span class="w"> </span>b
<span class="w">               </span>^
<span class="m">4</span>:<span class="w"> </span>note:<span class="w"> </span>Both<span class="w"> </span>left<span class="w"> </span>and<span class="w"> </span>right<span class="w"> </span>operands<span class="w"> </span>are<span class="w"> </span>unions
</pre></div>
</div>
<p>This suggests there’s a better way to type hint rather than using <code class="docutils literal notranslate"><span class="pre">Union</span></code> type.</p>
</section>
<section id="constrained-typevar-approach">
<h4><a class="toc-backref" href="#id12" role="doc-backlink">Constrained TypeVar Approach</a><a class="headerlink" href="#constrained-typevar-approach" title="Link to this heading">#</a></h4>
<p>Now consider using a constrained TypeVar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
<p>This enforces a stronger type constraint. Formally:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\exists T \in \{\text{int}, \text{float}, \text{NDArray}[\text{np.float64}]\}: \text{type}(a) = T \land \text{type}(b) = T\)</span></p></li>
<li><p>The return type must be the same <span class="math notranslate nohighlight">\(T\)</span> that was bound to the arguments</p></li>
</ul>
<p>This prevents type mixing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result1</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>                     <span class="c1"># Valid: T ↦ int</span>
<span class="n">result3</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>   <span class="c1"># Type Error: Cannot bind T to both int and NDArray</span>
<span class="n">result4</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">)</span>                   <span class="c1"># Type Error: Cannot bind T to both int and str</span>
</pre></div>
</div>
<p>TypeVar provides stronger compile-time guarantees and ensures type consistency
within a function scope. Naively, I <em>guess</em> the type checker applies some rules
for each approach above, my guess is:</p>
<ol class="arabic simple">
<li><p>Union types:</p>
<ol class="arabic simple">
<li><p>For each argument <code class="docutils literal notranslate"><span class="pre">x</span></code>, the type checker will check if <code class="docutils literal notranslate"><span class="pre">x</span></code> is of any of
the types in the union <code class="docutils literal notranslate"><span class="pre">Union[T_1,</span> <span class="pre">T_2,</span> <span class="pre">...]</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">x</span></code> is of any of the types in the union, then the type checker will
proceed to check the next argument.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">x</span></code> is not of any of the types in the union, then the type checker
will raise an error.</p></li>
</ol>
</li>
<li><p>Constrained TypeVar:</p>
<ol class="arabic simple">
<li><p>First occurrence of <code class="docutils literal notranslate"><span class="pre">T</span></code> is checked against the set of types defined in
the <code class="docutils literal notranslate"><span class="pre">TypeVar</span></code> declaration.</p></li>
<li><p>If the type of the first occurrence of <code class="docutils literal notranslate"><span class="pre">T</span></code> is not in the set, then the
type checker will raise an error.</p></li>
<li><p>If the type of the first occurrence of <code class="docutils literal notranslate"><span class="pre">T</span></code> is in the set, then <code class="docutils literal notranslate"><span class="pre">T</span></code> is
bound to the type of the first occurrence of <code class="docutils literal notranslate"><span class="pre">T</span></code> and <strong><em>all subsequent
occurrences of <code class="docutils literal notranslate"><span class="pre">T</span></code> must be of the same type</em></strong>.</p></li>
</ol>
</li>
</ol>
</section>
</section>
</section>
<section id="upper-bounding-type-variables">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Upper Bounding Type Variables</a><a class="headerlink" href="#upper-bounding-type-variables" title="Link to this heading">#</a></h2>
<p><strong>Bounds</strong> specify an upper bound for the type variable. This means that the
type variable can represent any type that is a subtype of the specified bound.</p>
<ul class="simple">
<li><p><strong>Syntax</strong>: <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">TypeVar(&quot;T&quot;,</span> <span class="pre">bound=SuperType)</span></code></p></li>
<li><p><strong>Meaning</strong>: The type variable <code class="docutils literal notranslate"><span class="pre">T</span></code> can be any type that is a subtype of
<code class="docutils literal notranslate"><span class="pre">SuperType</span></code> (including <code class="docutils literal notranslate"><span class="pre">SuperType</span></code> itself).</p></li>
<li><p><strong>Concrete</strong>: <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">TypeVar(&quot;T&quot;,</span> <span class="pre">bound=BaseModel)</span></code> means <code class="docutils literal notranslate"><span class="pre">T</span></code> can be any type
that is a subclass of <code class="docutils literal notranslate"><span class="pre">BaseModel</span></code> (from <code class="docutils literal notranslate"><span class="pre">pydantic</span></code>).</p></li>
</ul>
<section id="defining-type-variables-with-upper-bounds">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Defining Type Variables with Upper Bounds</a><a class="headerlink" href="#defining-type-variables-with-upper-bounds" title="Link to this heading">#</a></h3>
<p>In Python’s type hinting system, you can define a type variable that restricts
which types can be used in place of it by specifying an upper bound. This is
done using the <code class="docutils literal notranslate"><span class="pre">bound=&lt;type&gt;</span></code> argument in the <code class="docutils literal notranslate"><span class="pre">TypeVar</span></code> function. The key point
is that any type that replaces this type variable must be a subtype of the
specified boundary type.</p>
<p>It’s important to note that the boundary type itself cannot be another type
variable or a parameterized type. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOT ALLOWED!</span>
<span class="n">T1</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T1&quot;</span><span class="p">)</span>
<span class="n">T2</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T2&quot;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">T1</span><span class="p">)</span>        <span class="c1"># Cannot use T1 as a bound</span>
</pre></div>
</div>
<p>You also cannot use a parameterized generic type as a bound. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is NOT allowed</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>   <span class="c1"># Error! Can&#39;t use List[int] as a bound</span>

<span class="c1"># This is NOT allowed either</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">)</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">List</span><span class="p">[</span><span class="n">S</span><span class="p">])</span>     <span class="c1"># Error! Can&#39;t use parameterized List as bound</span>
</pre></div>
</div>
</section>
<section id="some-motivation-simple-length-comparison">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Some Motivation, Simple Length Comparison</a><a class="headerlink" href="#some-motivation-simple-length-comparison" title="Link to this heading">#</a></h3>
<p>Let’s say we want to write a function that compares the lengths of two
sequences.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">longer</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="k">else</span> <span class="n">y</span>
</pre></div>
</div>
<p>This fails the type checker because <code class="docutils literal notranslate"><span class="pre">T</span></code> could be any type - there’s no guarantee
it supports <code class="docutils literal notranslate"><span class="pre">len()</span></code>. For example, the below code works because <code class="docutils literal notranslate"><span class="pre">list</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code>
both support <code class="docutils literal notranslate"><span class="pre">len()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">compare_lengths</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">compare_lengths</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>However, the below code will fail at runtime because <code class="docutils literal notranslate"><span class="pre">int</span></code> does not support
<code class="docutils literal notranslate"><span class="pre">len()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">compare_lengths</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="a-case-study-on-sized">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">A Case Study On <code class="docutils literal notranslate"><span class="pre">Sized</span></code></a><a class="headerlink" href="#a-case-study-on-sized" title="Link to this heading">#</a></h3>
<p>We can fix this using <code class="docutils literal notranslate"><span class="pre">bound</span></code> to ensure our type variable only accepts types
that support <code class="docutils literal notranslate"><span class="pre">len()</span></code>. Consider the <code class="docutils literal notranslate"><span class="pre">Sized</span></code> protocol from Python’s <code class="docutils literal notranslate"><span class="pre">typing</span></code>
module, which represents any type that supports the <code class="docutils literal notranslate"><span class="pre">len()</span></code> function. We define
a type variable <code class="docutils literal notranslate"><span class="pre">ST</span></code> with <code class="docutils literal notranslate"><span class="pre">Sized</span></code> as its upper bound:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Sized</span>

<span class="n">ST</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;ST&quot;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">Sized</span><span class="p">)</span>
</pre></div>
</div>
<p>This definition means that <code class="docutils literal notranslate"><span class="pre">ST</span></code> can be replaced by any type that has a <code class="docutils literal notranslate"><span class="pre">len()</span></code>
method, ensuring that objects of type <code class="docutils literal notranslate"><span class="pre">ST</span></code> can be measured for their size.</p>
<p>The function <code class="docutils literal notranslate"><span class="pre">longer</span></code> takes two parameters, <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>, both of type <code class="docutils literal notranslate"><span class="pre">ST</span></code>. It
returns the object with the greater length:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">longer</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">ST</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">ST</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ST</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="k">else</span> <span class="n">y</span>
</pre></div>
</div>
<p>Because <code class="docutils literal notranslate"><span class="pre">ST</span></code> is bound to <code class="docutils literal notranslate"><span class="pre">Sized</span></code>, we can safely use <code class="docutils literal notranslate"><span class="pre">len()</span></code> on <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>. This
allows the function to work with any sized collection, such as lists or sets.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">longer([1],</span> <span class="pre">[1,</span> <span class="pre">2])</span></code> correctly returns the longer list, with the return
type being <code class="docutils literal notranslate"><span class="pre">List[int]</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">longer({1},</span> <span class="pre">{1,</span> <span class="pre">2})</span></code> operates on sets, returning the larger set as
<code class="docutils literal notranslate"><span class="pre">Set[int]</span></code>.</p></li>
<li><p>What’s interesting is that <code class="docutils literal notranslate"><span class="pre">longer([1],</span> <span class="pre">{1,</span> <span class="pre">2})</span></code> being okay and returning a
type <code class="docutils literal notranslate"><span class="pre">Collection[int]</span></code> is correct as well. This is because <strong>unlike</strong>
constraints, we do not need both <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> to be of the same exact type,
they just need to be subclass of the bound super type.</p></li>
</ul>
</section>
<section id="why-not-use-constraints">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Why Not Use Constraints?</a><a class="headerlink" href="#why-not-use-constraints" title="Link to this heading">#</a></h3>
<p>You might wonder why not use constraints, we can try, say, let’s say we want to
let <code class="docutils literal notranslate"><span class="pre">T</span></code> be a type that is either a <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code>, or <code class="docutils literal notranslate"><span class="pre">tuple</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
</pre></div>
</div>
<p>This approach has limitations because we need to add and list every possible
type that we want to allow, or that has <code class="docutils literal notranslate"><span class="pre">__len__</span></code> method. This is not scalable
and so bound is more applicable.</p>
<p>More formally, we can say something like, let <span class="math notranslate nohighlight">\(S\)</span> be the set of all types that
implement the <code class="docutils literal notranslate"><span class="pre">Sized</span></code> protocol. For type variable <span class="math notranslate nohighlight">\(T\)</span> with bound <code class="docutils literal notranslate"><span class="pre">Sized</span></code>:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\forall t \in T \implies t \in S\)</span></p></li>
<li><p>That is, any type <span class="math notranslate nohighlight">\(t\)</span> that can be bound to <span class="math notranslate nohighlight">\(T\)</span> must be in the set of <code class="docutils literal notranslate"><span class="pre">Sized</span></code>
types.</p></li>
</ul>
</section>
<section id="bounding-and-semantic-clarity">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Bounding and Semantic Clarity</a><a class="headerlink" href="#bounding-and-semantic-clarity" title="Link to this heading">#</a></h3>
<p>Bounding also offers more clarity and semantic meaning, than say, an <code class="docutils literal notranslate"><span class="pre">Union</span></code>
type.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Animal</span><span class="p">:</span>
    <span class="o">...</span>


<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="o">...</span>


<span class="k">class</span> <span class="nc">Cat</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="o">...</span>


<span class="k">class</span> <span class="nc">Car</span><span class="p">:</span>
    <span class="o">...</span>


<span class="n">AnimalType</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;AnimalType&quot;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">Animal</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">function_with_bound</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="n">AnimalType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnimalType</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">arg</span>


<span class="k">def</span> <span class="nf">function_with_union</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dog</span><span class="p">,</span> <span class="n">Cat</span><span class="p">,</span> <span class="n">Car</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dog</span><span class="p">,</span> <span class="n">Cat</span><span class="p">,</span> <span class="n">Car</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">arg</span>
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">function_with_bound</span></code>, the argument arg must be an instance of <code class="docutils literal notranslate"><span class="pre">Animal</span></code> or a
subclass of <code class="docutils literal notranslate"><span class="pre">Animal</span></code>. This means you could pass in an instance of <code class="docutils literal notranslate"><span class="pre">Dog</span></code> or
<code class="docutils literal notranslate"><span class="pre">Cat</span></code>, but not <code class="docutils literal notranslate"><span class="pre">Car</span></code>, because <code class="docutils literal notranslate"><span class="pre">Car</span></code> is not a subclass of <code class="docutils literal notranslate"><span class="pre">Animal</span></code>.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">function_with_union</span></code>, the argument arg can be an instance of <code class="docutils literal notranslate"><span class="pre">Dog</span></code>, <code class="docutils literal notranslate"><span class="pre">Cat</span></code>,
or <code class="docutils literal notranslate"><span class="pre">Car</span></code>. There’s no requirement that these types are related in any way.</p>
</section>
<section id="a-case-study-on-addable">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">A Case Study On <code class="docutils literal notranslate"><span class="pre">Addable</span></code></a><a class="headerlink" href="#a-case-study-on-addable" title="Link to this heading">#</a></h3>
<p>Let’s say we want to write a function that doubles any number. Without <code class="docutils literal notranslate"><span class="pre">bound</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">double</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">x</span>
</pre></div>
</div>
<p>If we run through <code class="docutils literal notranslate"><span class="pre">mypy</span></code>, we get the below errors:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>tmp.py:237: error: Returning Any from function declared to return &quot;T&quot;  [no-any-return]
        return x + x
        ^~~~~~~~~~~~
tmp.py:237: error: Unsupported left operand type for + (&quot;T&quot;)  [operator]
        return x + x
               ^~~~~
Found 2 errors in 1 file (checked 1 source file)
</pre></div>
</div>
<p>Rightfully so, same logic, not all types support <code class="docutils literal notranslate"><span class="pre">+</span></code> operation, like
<code class="docutils literal notranslate"><span class="pre">double(x={&quot;key&quot;:</span> <span class="pre">&quot;value&quot;})</span></code> will cause errors. To resolve this, we seek to find
a class like <code class="docutils literal notranslate"><span class="pre">Sized</span></code> that has the <code class="docutils literal notranslate"><span class="pre">__add__</span></code> method. But let’s say it’s hard to
find, we can define our own protocol.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Protocol</span>


<span class="k">class</span> <span class="nc">Addable</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span> <span class="o">...</span>


<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">Addable</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">double</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">x</span>
</pre></div>
</div>
</section>
</section>
<section id="bound-versus-constraints">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Bound versus Constraints</a><a class="headerlink" href="#bound-versus-constraints" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>Bounds</strong> are used to specify that a type variable must be a subtype of a
particular type. This is akin to setting an upper limit (or in some
contexts, a lower limit) on what the type variable can be. The purpose of
bounds is to ensure that the type variable adheres to a hierarchical type
constraint, typically ensuring that it inherits certain methods or
properties.</p></li>
<li><p><strong>Constraints</strong>, on the other hand, specify a list of explicit types that a
type variable can represent, without implying any hierarchical relationship
between them. The purpose of constraints is to allow a type variable to be
more flexible by being one of several types, rather than restricting it to a
subtype of a specific class or interface.</p></li>
</ul>
<p>The comparison is pretty superficial but something to remember is that you can
mix types within arguments if you use bound, which behaves a little like
<code class="docutils literal notranslate"><span class="pre">Union</span></code>, whereas in constraint, all arguments must be of the exact same type.</p>
<p>Let’s see an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AnimalType</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;AnimalType&quot;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">Animal</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">function_with_bound</span><span class="p">(</span><span class="n">arg1</span><span class="p">:</span> <span class="n">AnimalType</span><span class="p">,</span> <span class="n">arg2</span><span class="p">:</span> <span class="n">AnimalType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">AnimalType</span><span class="p">,</span> <span class="n">AnimalType</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span>

<span class="n">cat</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">()</span>
<span class="n">tabby</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">()</span>
<span class="n">dog</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">()</span>

<span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">function_with_bound</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">dog</span><span class="p">)</span>
</pre></div>
</div>
<p>This above code will not raise any issue when compared to the below code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AnimalType</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;AnimalType&quot;</span><span class="p">,</span> <span class="n">Cat</span><span class="p">,</span> <span class="n">Dog</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">function_with_bound</span><span class="p">(</span><span class="n">arg1</span><span class="p">:</span> <span class="n">AnimalType</span><span class="p">,</span> <span class="n">arg2</span><span class="p">:</span> <span class="n">AnimalType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">AnimalType</span><span class="p">,</span> <span class="n">AnimalType</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span>

<span class="n">cat</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">()</span>
<span class="n">tabby</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">()</span>
<span class="n">dog</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">()</span>

<span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">function_with_bound</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">dog</span><span class="p">)</span>
</pre></div>
</div>
<p>This is because if we use constraint, our contract is that within the scope, all
arguments must be of type <code class="docutils literal notranslate"><span class="pre">AnimalType</span></code>, whereas when in bound, <code class="docutils literal notranslate"><span class="pre">arg1</span></code> and <code class="docutils literal notranslate"><span class="pre">arg2</span></code>
can be different, as long as both are upper bounded by <code class="docutils literal notranslate"><span class="pre">Animal</span></code>.</p>
</section>
<section id="references-and-further-readings">
<h2><a class="toc-backref" href="#id21" role="doc-backlink">References and Further Readings</a><a class="headerlink" href="#references-and-further-readings" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://stackoverflow.com/questions/58903906/whats-the-difference-between-a-constrained-typevar-and-a-union">What’s the difference between a constrained TypeVar and a Union?</a></p></li>
<li><p><a class="reference external" href="https://peps.python.org/pep-0484/#type-variables-with-an-upper-bound">Type variables with an upper bound - PEP484</a></p></li>
<li><p><a class="reference external" href="https://stackoverflow.com/questions/59933946/difference-between-typevart-a-b-and-typevart-bound-uniona-b">Difference between TypeVar(“T”, A, B) and TypeVar(“T”, bound=Union[A, B])</a></p></li>
</ul>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><code class="docutils literal notranslate"><span class="pre">mypy</span> <span class="pre">run</span> <span class="pre">&lt;file_name&gt;.py</span></code></p>
</aside>
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://stackoverflow.com/questions/58903906/whats-the-difference-between-a-constrained-typevar-and-a-union">What’s the difference between a constrained TypeVar and a Union?</a></p>
</aside>
</aside>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./computer_science/type_theory"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="04-generics.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Generics and Type Variables</p>
      </div>
    </a>
    <a class="right-next"
       href="06-invariance-covariance-contravariance.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Invariance, Covariance and Contravariance</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#some-motivation-the-problem-with-unconstrained-type-variable">Some Motivation, The Problem With Unconstrained Type Variable</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#constraining-type-variable">Constraining Type Variable</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#type-binding">Type Binding</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#type-variables-and-substitution">Type Variables And Substitution</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#binding-time-and-scope">Binding Time And Scope</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#union-type-versus-constrained-type-variable">Union Type versus Constrained Type Variable</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#union-type">Union Type</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#constrained-typevar-approach">Constrained TypeVar Approach</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upper-bounding-type-variables">Upper Bounding Type Variables</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-type-variables-with-upper-bounds">Defining Type Variables with Upper Bounds</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#some-motivation-simple-length-comparison">Some Motivation, Simple Length Comparison</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-case-study-on-sized">A Case Study On <code class="docutils literal notranslate"><span class="pre">Sized</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-not-use-constraints">Why Not Use Constraints?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bounding-and-semantic-clarity">Bounding and Semantic Clarity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-case-study-on-addable">A Case Study On <code class="docutils literal notranslate"><span class="pre">Addable</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bound-versus-constraints">Bound versus Constraints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references-and-further-readings">References and Further Readings</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Gao Hongnan
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>


  <footer class="bd-footer">
  </footer>
<div class="share-buttons" style="padding: 15px; text-align: center; background-color: #f5f5f5; margin: 15px 0;">
    <div class="container" style="max-width: 500px; margin: 0 auto;">
        <h3 style="margin: 0 0 10px 0; font-size: 1.1em;">Connect with me!</h3>
        <div style="display: flex; justify-content: center; gap: 15px;">
            <!-- LinkedIn Follow Button -->
            <a href="https://www.linkedin.com/in/gao-hongnan/" target="_blank" style="text-decoration: none; flex: 1; max-width: 160px;">
                <button style="background-color: #0077b5; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 0.9em;">
                    Follow on LinkedIn
                </button>
            </a>

            <!-- Twitter/X Follow Button -->
            <a href="https://x.com/gaohongnan" target="_blank" style="text-decoration: none; flex: 1; max-width: 160px;">
                <button style="background-color: #000000; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 0.9em;">
                    Follow on X
                </button>
            </a>
        </div>

        <h3 style="margin: 12px 0 10px 0; font-size: 1.1em;">Share this page!</h3>
        <div style="display: flex; justify-content: center; gap: 15px;">
            <!-- LinkedIn Share Button -->
            <a href="javascript:void(0);" onclick="window.open('https://www.linkedin.com/sharing/share-offsite/?url=' + encodeURIComponent(window.location.href), 'linkedin-share', 'width=600,height=400')" style="text-decoration: none; flex: 1; max-width: 160px;">
                <button style="background-color: #0077b5; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 0.9em;">
                    Share on LinkedIn
                </button>
            </a>

            <!-- Twitter/X Share Button -->
            <a href="javascript:void(0);" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent('Check out this page by @gaohongnan!') + '&url=' + encodeURIComponent(window.location.href), 'twitter-share', 'width=600,height=400')" style="text-decoration: none; flex: 1; max-width: 160px;">
                <button style="background-color: #000000; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 0.9em;">
                    Share on X
                </button>
            </a>
        </div>
    </div>
</div>

  </body>
</html>